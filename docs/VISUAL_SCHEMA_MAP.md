# Visual Schema Enhancement Map

## ğŸ—ºï¸ Table Relationship with New Fields

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VENDOR                                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Existing: id, vendor_code, vendor_name, vendor_type, ...        â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• NEW FIELDS:                                                   â”‚
â”‚ â€¢ drug_license_number (regulatory)                              â”‚
â”‚ â€¢ gmp_certified (BOOLEAN)                                       â”‚
â”‚ â€¢ iso_certified (BOOLEAN)                                       â”‚
â”‚ â€¢ credit_days (payment terms)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ vendor_id FK
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MEDICINE_MASTER                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Existing: id, medicine_code, medicine_name, ...                 â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• NEW FIELDS:                                                   â”‚
â”‚ â€¢ hsn_code (tax compliance) â­                                   â”‚
â”‚ â€¢ pack_size (e.g., "10x10 blister") â­                          â”‚
â”‚ â€¢ primary_unit, secondary_unit (standardization)                â”‚
â”‚ â€¢ conversion_factor (e.g., 1 kg = 1000 g)                      â”‚
â”‚ â€¢ primary_packaging (blister, bottle, strip)                    â”‚
â”‚ â€¢ secondary_packaging (carton, box)                             â”‚
â”‚ â€¢ units_per_pack                                                â”‚
â”‚ â€¢ regulatory_approvals (JSON: USFDA, EMA, etc.)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ medicine_id FK
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PI_ITEM                                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Existing: id, pi_id, medicine_id, quantity, unit_price, ...     â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• NEW FIELDS:                                                   â”‚
â”‚ â€¢ hsn_code (auto from medicine_master) â­                       â”‚
â”‚ â€¢ pack_size (auto from medicine_master) â­                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ pi_item_id FK
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          EOPA                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ No changes (already complete)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ EOPA â†’ PO Generation
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PURCHASE_ORDER                                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Existing: id, po_number, po_date, po_type, vendor_id, ...       â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• QUALITY REQUIREMENTS:                                         â”‚
â”‚ â€¢ require_coa (Certificate of Analysis)                         â”‚
â”‚ â€¢ require_bmr (Batch Manufacturing Record)                      â”‚
â”‚ â€¢ require_msds (Material Safety Data Sheet)                     â”‚
â”‚ â€¢ sample_quantity                                               â”‚
â”‚ â€¢ shelf_life_minimum (days)                                     â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• SHIPPING & BILLING:                                           â”‚
â”‚ â€¢ ship_to (TEXT)                                                â”‚
â”‚ â€¢ bill_to (TEXT)                                                â”‚
â”‚ â€¢ buyer_reference_no                                            â”‚
â”‚ â€¢ buyer_contact_person                                          â”‚
â”‚ â€¢ transport_mode (Road/Air/Sea/Rail)                            â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• FREIGHT & PAYMENT:                                            â”‚
â”‚ â€¢ freight_terms (FOB, CIF, Ex-Works)                            â”‚
â”‚ â€¢ payment_terms (e.g., "30 days from invoice")                  â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• CURRENCY:                                                     â”‚
â”‚ â€¢ currency_code (USD, EUR, INR)                                 â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• AMENDMENT TRACKING:                                           â”‚
â”‚ â€¢ amendment_number (0 = original)                               â”‚
â”‚ â€¢ amendment_date                                                â”‚
â”‚ â€¢ original_po_id (FK to self)                                   â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• APPROVAL METADATA:                                            â”‚
â”‚ â€¢ prepared_by (user_id)                                         â”‚
â”‚ â€¢ checked_by (user_id)                                          â”‚
â”‚ â€¢ approved_by (user_id)                                         â”‚
â”‚ â€¢ verified_by (user_id)                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                  â”‚
          â”‚ po_id FK                         â”‚ po_id FK
          â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     PO_ITEM             â”‚    â”‚   PO_TERMS_CONDITIONS (NEW)   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Existing: id, po_id,    â”‚    â”‚ â€¢ id                          â”‚
â”‚ medicine_id, quantity   â”‚    â”‚ â€¢ po_id (FK)                  â”‚
â”‚                         â”‚    â”‚ â€¢ term_text (TEXT)            â”‚
â”‚ ğŸ†• TAX COMPLIANCE:       â”‚    â”‚ â€¢ priority (display order)    â”‚
â”‚ â€¢ hsn_code â­           â”‚    â”‚ â€¢ created_at                  â”‚
â”‚ â€¢ gst_rate (5-28%)      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                         â”‚
â”‚ ğŸ†• PACK SIZE:            â”‚
â”‚ â€¢ pack_size â­          â”‚
â”‚                         â”‚
â”‚ ğŸ†• ARTWORK (PM only):    â”‚
â”‚ â€¢ language              â”‚
â”‚ â€¢ artwork_version       â”‚
â”‚ â€¢ artwork_file_url      â”‚
â”‚ â€¢ artwork_approval_ref  â”‚
â”‚ â€¢ gsm (paper weight)    â”‚
â”‚ â€¢ ply (box layers)      â”‚
â”‚ â€¢ box_dimensions        â”‚
â”‚ â€¢ color_spec            â”‚
â”‚ â€¢ printing_instructions â”‚
â”‚ â€¢ die_cut_info          â”‚
â”‚ â€¢ plate_charges         â”‚
â”‚                         â”‚
â”‚ ğŸ†• QUALITY (RM/FG):      â”‚
â”‚ â€¢ specification_ref     â”‚
â”‚ â€¢ test_method           â”‚
â”‚                         â”‚
â”‚ ğŸ†• DELIVERY:             â”‚
â”‚ â€¢ delivery_schedule_typeâ”‚
â”‚ â€¢ delivery_date         â”‚
â”‚ â€¢ delivery_window_start â”‚
â”‚ â€¢ delivery_window_end   â”‚
â”‚                         â”‚
â”‚ ğŸ†• TOLERANCES:           â”‚
â”‚ â€¢ quantity_tolerance_%  â”‚
â”‚ â€¢ price_tolerance_%     â”‚
â”‚                         â”‚
â”‚ ğŸ†• DISCOUNT:             â”‚
â”‚ â€¢ discount_%            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ po_id FK
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VENDOR_INVOICE                                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ Existing: id, invoice_number, po_id, medicine_id, quantity, ... â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• TAX COMPLIANCE:                                               â”‚
â”‚ â€¢ hsn_code (must match PO item) â­                              â”‚
â”‚ â€¢ gst_rate (5-28%)                                              â”‚
â”‚ â€¢ gst_amount (calculated)                                       â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• FREIGHT & INSURANCE:                                          â”‚
â”‚ â€¢ freight_charges                                               â”‚
â”‚ â€¢ insurance_charges                                             â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• CURRENCY:                                                     â”‚
â”‚ â€¢ currency_code                                                 â”‚
â”‚ â€¢ exchange_rate                                                 â”‚
â”‚ â€¢ base_currency_amount (INR)                                    â”‚
â”‚                                                                  â”‚
â”‚ ğŸ†• BATCH TRACKING (CRITICAL for Pharma): âš•ï¸                     â”‚
â”‚ â€¢ batch_number                                                  â”‚
â”‚ â€¢ manufacturing_date                                            â”‚
â”‚ â€¢ expiry_date                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Field Flow: Auto-Population Path

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MEDICINE_MASTER    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â€¢ hsn_code         â”‚â”€â”€â”€â”€â”
â”‚ â€¢ pack_size        â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                          â”‚ Copy on Create (editable)
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PI_ITEM            â”‚  â”‚ PO_ITEM            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â€¢ hsn_code âœ“       â”‚  â”‚ â€¢ hsn_code âœ“       â”‚
â”‚ â€¢ pack_size âœ“      â”‚  â”‚ â€¢ pack_size âœ“      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Validate on Invoice
                          â”‚
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ VENDOR_INVOICE     â”‚
                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
                    â”‚ â€¢ hsn_code âœ“       â”‚
                    â”‚   (must match PO)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Conditional Field Display by PO Type

### RM (Raw Material) PO
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PO_ITEM (RM Type)                       â”‚
â”‚                                         â”‚
â”‚ âœ… SHOW:                                 â”‚
â”‚ â€¢ hsn_code, gst_rate, pack_size         â”‚
â”‚ â€¢ specification_reference               â”‚
â”‚ â€¢ test_method (USP, BP, IP)             â”‚
â”‚ â€¢ delivery_schedule                     â”‚
â”‚ â€¢ quantity_tolerance_%                  â”‚
â”‚                                         â”‚
â”‚ âŒ HIDE:                                 â”‚
â”‚ â€¢ All artwork fields                    â”‚
â”‚ â€¢ PM-specific packaging fields          â”‚
â”‚                                         â”‚
â”‚ âœ… PO LEVEL:                             â”‚
â”‚ â€¢ require_coa âœ“                         â”‚
â”‚ â€¢ require_msds âœ“                        â”‚
â”‚ â€¢ shelf_life_minimum âœ“                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### PM (Packaging Material) PO
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PO_ITEM (PM Type)                       â”‚
â”‚                                         â”‚
â”‚ âœ… SHOW:                                 â”‚
â”‚ â€¢ hsn_code, gst_rate, pack_size         â”‚
â”‚ â€¢ language â­                            â”‚
â”‚ â€¢ artwork_version â­                     â”‚
â”‚ â€¢ artwork_file_url â­                    â”‚
â”‚ â€¢ artwork_approval_ref                  â”‚
â”‚ â€¢ gsm (paper weight) â­                  â”‚
â”‚ â€¢ ply (box layers)                      â”‚
â”‚ â€¢ box_dimensions â­                      â”‚
â”‚ â€¢ color_spec (CMYK, Pantone)            â”‚
â”‚ â€¢ printing_instructions                 â”‚
â”‚ â€¢ die_cut_info                          â”‚
â”‚ â€¢ plate_charges                         â”‚
â”‚                                         â”‚
â”‚ âŒ HIDE:                                 â”‚
â”‚ â€¢ specification_reference               â”‚
â”‚ â€¢ test_method                           â”‚
â”‚                                         â”‚
â”‚ âœ… PO LEVEL:                             â”‚
â”‚ â€¢ ship_to, bill_to âœ“                    â”‚
â”‚ â€¢ freight_terms âœ“                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### FG (Finished Goods) PO
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PO_ITEM (FG Type)                       â”‚
â”‚                                         â”‚
â”‚ âœ… SHOW:                                 â”‚
â”‚ â€¢ hsn_code, gst_rate, pack_size â­       â”‚
â”‚ â€¢ delivery_schedule â­                   â”‚
â”‚ â€¢ delivery_window                       â”‚
â”‚ â€¢ specification_reference               â”‚
â”‚                                         â”‚
â”‚ âŒ HIDE:                                 â”‚
â”‚ â€¢ All artwork fields                    â”‚
â”‚                                         â”‚
â”‚ âœ… PO LEVEL:                             â”‚
â”‚ â€¢ require_coa âœ“                         â”‚
â”‚ â€¢ ship_to, bill_to âœ“                    â”‚
â”‚ â€¢ approval metadata âœ“                   â”‚
â”‚                                         â”‚
â”‚ âœ… INVOICE LEVEL:                        â”‚
â”‚ â€¢ batch_number â­ (critical)             â”‚
â”‚ â€¢ manufacturing_date â­                  â”‚
â”‚ â€¢ expiry_date â­                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Validation Chain

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HSN Code Validation Chain                                â”‚
â”‚                                                           â”‚
â”‚ medicine_master.hsn_code                                  â”‚
â”‚           â†“                                               â”‚
â”‚ pi_item.hsn_code (auto-populated, can override)          â”‚
â”‚           â†“                                               â”‚
â”‚ po_item.hsn_code (auto-populated, can override)          â”‚
â”‚           â†“                                               â”‚
â”‚ vendor_invoice.hsn_code (MUST MATCH po_item.hsn_code)    â”‚
â”‚                                                           â”‚
â”‚ âš ï¸ Log warning if user overrides default                  â”‚
â”‚ âŒ Reject invoice if HSN doesn't match PO item            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GST Calculation Flow                                      â”‚
â”‚                                                           â”‚
â”‚ vendor_invoice.total_amount = â‚¹10,000                     â”‚
â”‚ vendor_invoice.gst_rate = 18%                             â”‚
â”‚                                                           â”‚
â”‚ CALCULATE:                                                â”‚
â”‚ gst_amount = 10,000 * (18 / 100) = â‚¹1,800                â”‚
â”‚ net_amount = 10,000 + 1,800 = â‚¹11,800                    â”‚
â”‚                                                           â”‚
â”‚ âš ï¸ Use Decimal type (not float) for accuracy              â”‚
â”‚ âœ… Add unit tests for all GST rates (5, 12, 18, 28%)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Batch Expiry Validation                                   â”‚
â”‚                                                           â”‚
â”‚ vendor_invoice.expiry_date                                â”‚
â”‚           â†“                                               â”‚
â”‚ CHECK 1: expiry_date > manufacturing_date âœ“               â”‚
â”‚ CHECK 2: expiry_date >= (today + shelf_life_minimum) âœ“   â”‚
â”‚           â†“                                               â”‚
â”‚ ALERT: If expiry within 6 months â†’ notify warehouse      â”‚
â”‚                                                           â”‚
â”‚ âš ï¸ Critical for pharma compliance                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ PDF Template Sections

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PURCHASE ORDER PDF                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ HEADER                                                      â”‚
â”‚ â€¢ Company name, logo, address (from config) âœ“               â”‚
â”‚ â€¢ PO Number, Date, Type (RM/PM/FG)                          â”‚
â”‚ â€¢ Vendor details (name, address, contact)                   â”‚
â”‚                                                             â”‚
â”‚ SHIPPING & BILLING (NEW) â­                                 â”‚
â”‚ â€¢ Ship To: [ship_to text]                                   â”‚
â”‚ â€¢ Bill To: [bill_to text]                                   â”‚
â”‚ â€¢ Buyer Ref: [buyer_reference_no]                           â”‚
â”‚ â€¢ Transport Mode: [transport_mode]                          â”‚
â”‚ â€¢ Freight Terms: [freight_terms]                            â”‚
â”‚                                                             â”‚
â”‚ ITEMS TABLE                                                 â”‚
â”‚ â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚# â”‚Medicine  â”‚Pack    â”‚HSN  â”‚Qty     â”‚Delivery  â”‚         â”‚
â”‚ â”‚  â”‚          â”‚Sizeâ­  â”‚Codeâ­â”‚        â”‚Dateâ­    â”‚         â”‚
â”‚ â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚ â”‚1 â”‚Med A     â”‚10x10   â”‚3004 â”‚1000    â”‚Jan 15    â”‚         â”‚
â”‚ â”‚2 â”‚Med B     â”‚100ml   â”‚3003 â”‚500     â”‚Jan 20    â”‚         â”‚
â”‚ â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚ IF po_type === 'PM': SHOW ARTWORK TABLE â­                  â”‚
â”‚ â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚# â”‚Language  â”‚Artwork â”‚GSM  â”‚Ply    â”‚Dimensionsâ”‚          â”‚
â”‚ â”‚  â”‚          â”‚Version â”‚     â”‚       â”‚          â”‚          â”‚
â”‚ â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚ â”‚1 â”‚English   â”‚v2.1    â”‚250  â”‚3-ply  â”‚300x200x100â”‚         â”‚
â”‚ â”‚2 â”‚French    â”‚v2.0    â”‚300  â”‚5-ply  â”‚400x300x200â”‚         â”‚
â”‚ â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚ QUALITY REQUIREMENTS (NEW) â­                               â”‚
â”‚ â€¢ Certificate of Analysis (COA): [Yes/No]                   â”‚
â”‚ â€¢ Batch Manufacturing Record (BMR): [Yes/No]                â”‚
â”‚ â€¢ MSDS Required: [Yes/No]                                   â”‚
â”‚ â€¢ Sample Quantity: [X units]                                â”‚
â”‚ â€¢ Minimum Shelf Life: [X days]                              â”‚
â”‚                                                             â”‚
â”‚ TERMS & CONDITIONS (NEW) â­                                 â”‚
â”‚ 1. [First term text]                                        â”‚
â”‚ 2. [Second term text]                                       â”‚
â”‚ 3. [Third term text]                                        â”‚
â”‚ ... (ordered by priority)                                   â”‚
â”‚                                                             â”‚
â”‚ PAYMENT TERMS (NEW) â­                                      â”‚
â”‚ â€¢ Payment Terms: [payment_terms text]                       â”‚
â”‚ â€¢ Currency: [currency_code]                                 â”‚
â”‚                                                             â”‚
â”‚ APPROVAL SIGNATURES (NEW) â­                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚Prepared  â”‚Checked   â”‚Approved  â”‚Verified  â”‚             â”‚
â”‚ â”‚          â”‚          â”‚          â”‚          â”‚             â”‚
â”‚ â”‚[User 1]  â”‚[User 2]  â”‚[User 3]  â”‚[User 4]  â”‚             â”‚
â”‚ â”‚          â”‚          â”‚          â”‚          â”‚             â”‚
â”‚ â”‚_______   â”‚_______   â”‚_______   â”‚_______   â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Implementation Priority Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1: FOUNDATION (Week 1)                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ 1. â­â­â­ Alembic Migration (BLOCKING)                   â”‚
â”‚    â€¢ Create migration script                            â”‚
â”‚    â€¢ Test on dev DB                                     â”‚
â”‚    â€¢ Add all indexes                                    â”‚
â”‚                                                         â”‚
â”‚ 2. â­â­â­ Update Models (BLOCKING)                        â”‚
â”‚    â€¢ Vendor (4 fields)                                  â”‚
â”‚    â€¢ Medicine (11 fields) â† CRITICAL PATH               â”‚
â”‚    â€¢ PI_Item (2 fields)                                 â”‚
â”‚    â€¢ PO & PO_Item (45 fields combined)                  â”‚
â”‚    â€¢ Invoice (11 fields)                                â”‚
â”‚    â€¢ NEW: POTermsConditions                             â”‚
â”‚                                                         â”‚
â”‚ 3. â­â­â­ Update Schemas (BLOCKING)                       â”‚
â”‚    â€¢ All request/response schemas                       â”‚
â”‚    â€¢ Validation rules                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 2: BUSINESS LOGIC (Week 1-2)                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ 1. â­â­ Medicine Service                                 â”‚
â”‚    â€¢ Auto-populate hsn_code to PI items                 â”‚
â”‚    â€¢ Auto-populate pack_size to PI items                â”‚
â”‚                                                         â”‚
â”‚ 2. â­â­ PO Service                                       â”‚
â”‚    â€¢ Auto-populate hsn_code to PO items                 â”‚
â”‚    â€¢ Auto-populate pack_size to PO items                â”‚
â”‚    â€¢ Handle PO terms creation                           â”‚
â”‚    â€¢ Handle approval workflow                           â”‚
â”‚                                                         â”‚
â”‚ 3. â­â­ Invoice Service                                  â”‚
â”‚    â€¢ Validate HSN code matches PO item                  â”‚
â”‚    â€¢ Calculate GST amount                               â”‚
â”‚    â€¢ Handle batch tracking                              â”‚
â”‚    â€¢ Currency conversion                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 3: USER INTERFACE (Week 2-3)                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ 1. â­ Medicine Master Form                              â”‚
â”‚    â€¢ Add all new tabs (units, packaging, regulatory)    â”‚
â”‚                                                         â”‚
â”‚ 2. â­ PO Form                                           â”‚
â”‚    â€¢ Quality section                                    â”‚
â”‚    â€¢ Shipping/Billing section                           â”‚
â”‚    â€¢ Approval section                                   â”‚
â”‚    â€¢ Terms & Conditions editor                          â”‚
â”‚                                                         â”‚
â”‚ 3. â­ PO Item Form (Conditional)                        â”‚
â”‚    â€¢ Show PM fields if po_type === 'PM'                 â”‚
â”‚    â€¢ Show RM quality fields if po_type === 'RM'         â”‚
â”‚                                                         â”‚
â”‚ 4. â­ Invoice Form                                      â”‚
â”‚    â€¢ HSN, GST fields                                    â”‚
â”‚    â€¢ Batch tracking fields                              â”‚
â”‚    â€¢ Currency fields                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 4: REPORTS & TESTING (Week 3)                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ 1. â­â­ PDF Service                                      â”‚
â”‚    â€¢ Update PO PDF template                             â”‚
â”‚    â€¢ Conditional sections by PO type                    â”‚
â”‚                                                         â”‚
â”‚ 2. â­â­ Testing                                          â”‚
â”‚    â€¢ Unit tests                                         â”‚
â”‚    â€¢ Integration tests                                  â”‚
â”‚    â€¢ UI tests                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visual Schema Map Version 1.0 - November 15, 2025**
